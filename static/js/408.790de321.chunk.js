"use strict";(self.webpackChunkagora_platform=self.webpackChunkagora_platform||[]).push([[408],{4408:(e,s,a)=>{a.r(s),a.d(s,{default:()=>d});var c=a(5043),l=a(9001),i=a(5897),t=a(6255),r=a(3488),n=a(579);const o=(0,c.memo)(()=>{const e=(0,l.Zp)(),s=JSON.parse(localStorage.getItem("agoraUser")||"null"),[a,o]=(0,c.useState)(""),[d,h]=(0,c.useState)("all"),[u,m]=(0,c.useState)([]),[p,x]=(0,c.useState)(!1),[j,v]=(0,c.useState)(null),g=(0,t.d)(a,500);(0,c.useEffect)(()=>{if(!g||g.trim().length<2)return void m([]);(async()=>{x(!0),v(null);try{const e=new URLSearchParams({q:g,category:d,page:1,limit:20}),s=await fetch("".concat(r.A.API_URL,"/search?").concat(e));if(!s.ok)throw new Error("Search failed");const a=await s.json();m(a.discussions||[])}catch(e){console.error("Search error:",e),v("Failed to search discussions. Please try again."),m([])}finally{x(!1)}})()},[g,d,null===s||void 0===s?void 0:s.id]);return(0,n.jsx)(i.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"search-page",children:(0,n.jsxs)("div",{className:"search-container container-golden",children:[(0,n.jsxs)("div",{className:"search-header",children:[(0,n.jsxs)("h1",{className:"search-title text-epigraphic",children:["\ud83d\udd0d Explore Discussions",(0,n.jsx)("span",{className:"title-greek",children:"\u1f08\u03bd\u03b1\u03b6\u03ae\u03c4\u03b7\u03c3\u03b7"})]}),(0,n.jsx)("p",{className:"search-subtitle",children:"Search the marketplace of ideas for wisdom"})]}),(0,n.jsxs)("div",{className:"search-input-container",children:[(0,n.jsx)("input",{type:"text",className:"search-input",placeholder:"\ud83d\udd0d Search discussions...",value:a,onChange:e=>o(e.target.value),autoFocus:!0}),(0,n.jsx)("span",{className:"search-icon",children:"\ud83d\udd0d"})]}),(0,n.jsx)("div",{className:"category-filters",children:[{value:"all",label:"All Topics",icon:"\ud83c\udf0d"},{value:"metaphysics",label:"Metaphysics",icon:"\ud83c\udf0c"},{value:"ethics",label:"Ethics",icon:"\u2696\ufe0f"},{value:"epistemology",label:"Epistemology",icon:"\ud83e\udde0"},{value:"aesthetics",label:"Aesthetics",icon:"\ud83c\udfa8"},{value:"logic",label:"Logic",icon:"\ud83d\udd2c"},{value:"stoicism",label:"Stoicism",icon:"\ud83c\udfdb\ufe0f"}].map(e=>(0,n.jsxs)("button",{className:"category-btn ".concat(d===e.value?"active":""),onClick:()=>h(e.value),children:[(0,n.jsx)("span",{className:"category-icon",children:e.icon}),e.label]},e.value))}),(0,n.jsx)("div",{className:"search-results",children:p?(0,n.jsxs)("div",{className:"loading-state",children:[(0,n.jsx)("div",{className:"loading-spinner"}),(0,n.jsx)("p",{children:"Searching the agora..."})]}):j?(0,n.jsxs)("div",{className:"error-state",children:[(0,n.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,n.jsx)("p",{children:j})]}):a&&0===u.length?(0,n.jsxs)("div",{className:"empty-state",children:[(0,n.jsx)("span",{className:"empty-icon",children:"\ud83d\udced"}),(0,n.jsxs)("p",{children:['No discussions found for "',a,'"']}),(0,n.jsx)("p",{className:"empty-hint",children:"Try different keywords or browse by category"})]}):a?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"results-count",children:["Found ",u.length," discussion",1!==u.length?"s":""]}),(0,n.jsx)("div",{className:"results-list",children:u.map((s,a)=>(0,n.jsxs)(i.P.div,{className:"result-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},onClick:()=>e("/discussion/".concat(s.id)),children:[(0,n.jsxs)("div",{className:"result-header",children:[(0,n.jsx)("h3",{className:"result-title",children:s.title}),(0,n.jsx)("span",{className:"result-category",children:s.category||"General"})]}),(0,n.jsx)("p",{className:"result-excerpt",children:s.content.length>200?s.content.substring(0,200)+"...":s.content}),(0,n.jsxs)("div",{className:"result-footer",children:[(0,n.jsxs)("span",{className:"result-author",children:["\ud83d\udc64 ",s.username]}),(0,n.jsxs)("span",{className:"result-replies",children:["\ud83d\udcac ",s.replies||0," replies"]}),(0,n.jsxs)("span",{className:"result-views",children:["\ud83d\udc41\ufe0f ",s.views||0," views"]})]})]},s.id))})]}):(0,n.jsxs)("div",{className:"empty-state",children:[(0,n.jsx)("span",{className:"empty-icon",children:"\ud83c\udfdb\ufe0f"}),(0,n.jsx)("p",{children:"Enter a search query to explore discussions"}),(0,n.jsx)("p",{className:"empty-hint",children:"Or browse categories above"})]})})]})})});o.displayName="Search";const d=o},6255:(e,s,a)=>{a.d(s,{d:()=>l});var c=a(5043);function l(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;const[a,l]=(0,c.useState)(e);return(0,c.useEffect)(()=>{const a=setTimeout(()=>{l(e)},s);return()=>{clearTimeout(a)}},[e,s]),a}}}]);
//# sourceMappingURL=408.790de321.chunk.js.map