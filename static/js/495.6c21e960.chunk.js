"use strict";(self.webpackChunkagora_platform=self.webpackChunkagora_platform||[]).push([[495],{3495:(s,e,a)=>{a.r(e),a.d(e,{default:()=>r});var i=a(5043),l=a(9001),n=a(5897),c=a(3488),t=a(579);const r=()=>{const s=(0,l.Zp)(),e=JSON.parse(localStorage.getItem("agoraUser")||"null"),[a,r]=(0,i.useState)([]),[o,d]=(0,i.useState)(null),[h,p]=(0,i.useState)(!0),[m,x]=(0,i.useState)(null);(0,i.useEffect)(()=>{j(),e&&N()},[e]);const j=async()=>{try{p(!0);const s=await fetch("".concat(c.A.API_URL,"/api/leaderboard?limit=100"));if(!s.ok)throw new Error("Failed to fetch leaderboard");const e=await s.json();r(e.leaderboard||[])}catch(s){console.error("Error fetching leaderboard:",s),x("Failed to load leaderboard")}finally{p(!1)}},N=async()=>{try{const s=await fetch("".concat(c.A.API_URL,"/api/reputation/").concat(e.id,"/rank"));if(s.ok){const e=await s.json();d(e)}}catch(s){console.error("Error fetching user rank:",s)}},v=s=>({Novice:"#8b949e",Apprentice:"#cd7f32",Scholar:"#c0c0c0",Master:"#d4af37",Sage:"#b9f2ff",Oracle:"#ff69b4"}[s]||"#8b949e"),u=s=>({Novice:"\ud83c\udf31",Apprentice:"\ud83d\udcda",Scholar:"\ud83c\udf93",Master:"\ud83e\uddd9",Sage:"\ud83e\uddd9\u200d\u2642\ufe0f",Oracle:"\ud83d\udd2e"}[s]||"\ud83c\udf31");return(0,t.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"leaderboard-page",children:(0,t.jsxs)("div",{className:"leaderboard-container",children:[(0,t.jsxs)("div",{className:"leaderboard-header",children:[(0,t.jsxs)("h1",{className:"leaderboard-title",children:["\ud83c\udfc6 Leaderboard",(0,t.jsx)("span",{className:"title-greek",children:"\u1f08\u03b3\u03ce\u03bd"})]}),(0,t.jsx)("p",{className:"leaderboard-subtitle",children:"The most distinguished philosophers of the Agora"})]}),o&&(0,t.jsxs)(n.P.div,{className:"user-rank-card",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},children:[(0,t.jsxs)("div",{className:"rank-badge",children:["#",o.rank||"\u2014"]}),(0,t.jsxs)("div",{className:"rank-info",children:[(0,t.jsx)("h3",{children:e.username}),(0,t.jsxs)("div",{className:"rank-stats",children:[(0,t.jsxs)("span",{className:"stat",children:["\u2b50 ",o.points," points"]}),(0,t.jsxs)("span",{className:"stat",children:["\ud83d\udcca Top ",o.percentile,"%"]})]})]})]}),h?(0,t.jsxs)("div",{className:"loading-state",children:[(0,t.jsx)("div",{className:"loading-spinner"}),(0,t.jsx)("p",{children:"Loading rankings..."})]}):m?(0,t.jsxs)("div",{className:"error-state",children:[(0,t.jsx)("span",{className:"error-icon",children:"\u26a0\ufe0f"}),(0,t.jsx)("p",{children:m})]}):0===a.length?(0,t.jsxs)("div",{className:"empty-state",children:[(0,t.jsx)("span",{className:"empty-icon",children:"\ud83c\udfdb\ufe0f"}),(0,t.jsx)("h3",{children:"No Rankings Yet"}),(0,t.jsx)("p",{children:"Be the first to earn reputation by creating discussions!"}),(0,t.jsx)("button",{className:"cta-button",onClick:()=>s("/dashboard"),children:"Create Discussion"})]}):(0,t.jsxs)(t.Fragment,{children:[a.length>=3&&(0,t.jsxs)("div",{className:"podium",children:[(0,t.jsxs)(n.P.div,{className:"podium-position second",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2},children:[(0,t.jsx)("div",{className:"position-medal",children:"\ud83e\udd48"}),(0,t.jsx)("div",{className:"position-avatar",children:a[1].top_badges||"\ud83d\udc64"}),(0,t.jsx)("h3",{className:"position-name",children:a[1].username}),(0,t.jsxs)("div",{className:"position-level",style:{color:v(a[1].level)},children:[u(a[1].level)," ",a[1].level]}),(0,t.jsxs)("div",{className:"position-points",children:["\u2b50 ",a[1].points.toLocaleString()," pts"]}),(0,t.jsxs)("div",{className:"position-badges",children:[a[1].badge_count," badges"]})]}),(0,t.jsxs)(n.P.div,{className:"podium-position first",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.1},children:[(0,t.jsx)("div",{className:"position-medal",children:"\ud83e\udd47"}),(0,t.jsx)("div",{className:"crown",children:"\ud83d\udc51"}),(0,t.jsx)("div",{className:"position-avatar",children:a[0].top_badges||"\ud83d\udc64"}),(0,t.jsx)("h3",{className:"position-name",children:a[0].username}),(0,t.jsxs)("div",{className:"position-level",style:{color:v(a[0].level)},children:[u(a[0].level)," ",a[0].level]}),(0,t.jsxs)("div",{className:"position-points",children:["\u2b50 ",a[0].points.toLocaleString()," pts"]}),(0,t.jsxs)("div",{className:"position-badges",children:[a[0].badge_count," badges"]})]}),(0,t.jsxs)(n.P.div,{className:"podium-position third",initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:[(0,t.jsx)("div",{className:"position-medal",children:"\ud83e\udd49"}),(0,t.jsx)("div",{className:"position-avatar",children:a[2].top_badges||"\ud83d\udc64"}),(0,t.jsx)("h3",{className:"position-name",children:a[2].username}),(0,t.jsxs)("div",{className:"position-level",style:{color:v(a[2].level)},children:[u(a[2].level)," ",a[2].level]}),(0,t.jsxs)("div",{className:"position-points",children:["\u2b50 ",a[2].points.toLocaleString()," pts"]}),(0,t.jsxs)("div",{className:"position-badges",children:[a[2].badge_count," badges"]})]})]}),(0,t.jsxs)("div",{className:"rankings-table",children:[(0,t.jsx)("h2",{className:"section-title",children:"Full Rankings"}),(0,t.jsx)("div",{className:"table-container",children:(0,t.jsxs)("table",{children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"rank-col",children:"Rank"}),(0,t.jsx)("th",{className:"user-col",children:"Philosopher"}),(0,t.jsx)("th",{className:"level-col",children:"Level"}),(0,t.jsx)("th",{className:"points-col",children:"Points"}),(0,t.jsx)("th",{className:"badges-col",children:"Badges"}),(0,t.jsx)("th",{className:"stats-col",children:"Stats"})]})}),(0,t.jsx)("tbody",{children:a.map((a,i)=>(0,t.jsxs)(n.P.tr,{className:a.user_id===(null===e||void 0===e?void 0:e.id)?"current-user":"",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*i},onClick:()=>s("/profile/".concat(a.user_id)),children:[(0,t.jsx)("td",{className:"rank-col",children:(0,t.jsx)("span",{className:"rank-number",children:a.leaderboard_rank})}),(0,t.jsx)("td",{className:"user-col",children:(0,t.jsxs)("div",{className:"user-info",children:[(0,t.jsx)("span",{className:"user-avatar",children:a.top_badges||"\ud83d\udc64"}),(0,t.jsx)("span",{className:"username",children:a.username})]})}),(0,t.jsx)("td",{className:"level-col",children:(0,t.jsxs)("span",{className:"level-badge",style:{backgroundColor:v(a.level)+"20",color:v(a.level)},children:[u(a.level)," ",a.level]})}),(0,t.jsx)("td",{className:"points-col",children:(0,t.jsxs)("span",{className:"points",children:["\u2b50 ",a.points.toLocaleString()]})}),(0,t.jsx)("td",{className:"badges-col",children:(0,t.jsxs)("span",{className:"badge-count",children:["\ud83c\udfc6 ",a.badge_count]})}),(0,t.jsx)("td",{className:"stats-col",children:(0,t.jsxs)("div",{className:"user-stats",children:[(0,t.jsxs)("span",{children:["\ud83d\udcdd ",a.posts_count]}),(0,t.jsxs)("span",{children:["\ud83d\udc4d ",a.upvotes_received]})]})})]},a.user_id))})]})})]})]})]})})}}}]);
//# sourceMappingURL=495.6c21e960.chunk.js.map